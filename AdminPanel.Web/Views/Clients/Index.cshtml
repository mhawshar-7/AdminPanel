@using AdminPanel.Web.Models
@using AdminPanel.Web.Models.DataTable
@{
    ViewData["Title"] = "Clients";

    // Configure DataTable
    var dataTableConfig = new DataTableConfiguration
    {
        Id = "clientsTable",
        Title = "Clients Management",
        AjaxUrl = Url.Action("GetClientsData", "Clients"),
        ServerSide = true,
        Paging = true,
        Searching = true,
        Ordering = true,
        PageLength = 10,
        Responsive = true,
        ShowCheckboxes = false,
        ShowSearchBox = true,
        SearchPlaceholder = "Search Clients...",
        WrapInCard = true,
        Columns = new List<DataTableColumn>
        {
            new DataTableColumn { Name = "name", Title = "Client Name", Sortable = true, Searchable = true },
            new DataTableColumn { Name = "email", Title = "Email", Sortable = true, Searchable = true },
            new DataTableColumn { Name = "phone", Title = "Phone", Sortable = true, Searchable = true },
            new DataTableColumn { Name = "modifiedDate", Title = "Creation Date", Sortable = true, Searchable = false, Type = DataTableColumnType.Date }
        },
        ActionButtons = new List<DataTableActionButton>
        {
            new DataTableActionButton
            {
                Text = "Edit",
                CssClass = "menu-link px-3",
                Controller = "Clients",
                Action = "Edit",
                RouteParameter = "id",
                Icon = "ki-duotone ki-pencil"
            },
            new DataTableActionButton
            {
                Text = "Delete",
                CssClass = "menu-link px-3",
                Controller = "Clients",
                Action = "Remove",
                RouteParameter = "id",
                Icon = "ki-duotone ki-trash",
                ConfirmAction = true,
                ConfirmMessage = "Are you sure you want to delete this client?"
            }
        },
        HeaderButtons = new List<DataTableActionButton>
        {
            new DataTableActionButton
            {
                Text = "Add Client",
                CssClass = "btn btn-primary",
                Controller = "Clients",
                Action = "Edit",
                Icon = "ki-duotone ki-plus"
            }
        }
    };
}

@await Component.InvokeAsync("DataTable", dataTableConfig)