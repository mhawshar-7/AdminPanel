@using AdminPanel.Web.Models
@using AdminPanel.Web.Models.DataTable
@{
    ViewData["Title"] = "Users";

    // Configure DataTable
    var dataTableConfig = new DataTableConfiguration
    {
        Id = "usersTable",
        Title = "Users Management",
        AjaxUrl = Url.Action("GetUsersData", "Users"),
        ServerSide = true,
        Paging = true,
        Searching = true,
        Ordering = true,
        PageLength = 10,
        Responsive = true,
        ShowCheckboxes = false,
        ShowSearchBox = true,
        SearchPlaceholder = "Search Users...",
        WrapInCard = true,
        Columns = new List<DataTableColumn>
        {
            new DataTableColumn { Name = "firstName", Title = "First Name", Sortable = true, Searchable = true },
            new DataTableColumn { Name = "lastName", Title = "Last Name", Sortable = true, Searchable = true },
            new DataTableColumn { Name = "email", Title = "Email", Sortable = true, Searchable = true },
            new DataTableColumn { Name = "userName", Title = "User Name", Sortable = true, Searchable = true },
        },
        ActionButtons = new List<DataTableActionButton>
        {
            new DataTableActionButton
            {
                Text = "Edit",
                CssClass = "menu-link px-3",
                Controller = "Users",
                Action = "Edit",
                RouteParameter = "id",
                Icon = "ki-duotone ki-pencil"
            },
            new DataTableActionButton
            {
                Text = "Delete",
                CssClass = "menu-link px-3",
                Controller = "Users",
                Action = "Remove",
                RouteParameter = "id",
                Icon = "ki-duotone ki-trash",
                ConfirmAction = true,
                ConfirmMessage = "Are you sure you want to delete this project?"
            }
        },
        HeaderButtons = new List<DataTableActionButton>
        {
            new DataTableActionButton
            {
                Text = "Add User",
                CssClass = "btn btn-primary",
                Controller = "Users",
                Action = "Edit",
                Icon = "ki-duotone ki-plus"
            }
        }
    };
}

@await Component.InvokeAsync("DataTable", dataTableConfig)